{"version":3,"file":"static/js/242.561dca87.chunk.js","mappings":"8IAiBA,IAbwB,SAAHA,GAAmB,IAAbC,EAAKD,EAALC,MACvB,OACIC,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CACDC,GAAE,gBACFC,MAAO,CACHC,QAASL,EAAMM,IACjBC,UAEFN,EAAAA,EAAAA,KAACO,EAAAA,EAAc,CAACC,MAAM,UAAUC,SAAS,WAGrD,C,2KCOA,EAjBgC,SAAHX,GAAmB,IAAbC,EAAKD,EAALC,MACzBW,GAAUC,EAAAA,EAAAA,YAAWC,EAAAA,GAM3B,OACIZ,EAAAA,EAAAA,KAACa,EAAAA,EAAU,CACP,aAAW,wBACXC,QAP0B,SAACC,GAC/BA,EAAEC,iBACFN,EAAQO,oBAAoBlB,EAChC,EAI2CO,UAEnCN,EAAAA,EAAAA,KAACkB,EAAAA,EAAU,CAACV,MAAM,UAAUC,SAAS,WAGjD,E,UC2CA,EAtD2B,WACvB,IAAAU,GAAsCC,EAAAA,EAAAA,UAAS,GAAEC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA1CI,EAAWF,EAAA,GAAEG,EAAcH,EAAA,GAChBI,GAAad,EAAAA,EAAAA,YAAWC,EAAAA,GAAnCc,UAIDC,EAFgB,GAEGJ,EACnBK,EAAoBD,EAHJ,GAIhBE,EAAmBJ,EAASK,MAAMF,EAAmBD,GACrDI,EAAaC,KAAKC,KAAKR,EAASS,OALhB,IAQhBC,GAAuBC,EAAAA,EAAAA,YACzBP,EAAiBQ,KAAI,SAACjC,GAClB,MAAO,CACHkC,SAAU,CAAC,QAAS,CAAEjC,GAAID,IAC1BmC,QAASC,EAAAA,GAEjB,KAKJ,GAFkBL,EAAqBM,MAAK,SAACC,GAAC,OAAqB,IAAhBA,EAAEC,SAAkB,IAGnE,OAAO3C,EAAAA,EAAAA,KAAC4C,EAAAA,EAAO,IAGnB,IAAMC,EAASV,EAAqBE,KAAI,SAACS,GAErC,OADAA,EAAEC,KAAKC,UAAYF,EAAEC,KAAKE,OAAOZ,KAAI,SAAAa,GAAC,OAAIA,EAAE7C,EAAE,IACvCyC,EAAEC,IACb,IAEA,OACI/C,EAAAA,EAAAA,KAACmD,EAAAA,EAAY,CACTC,MAAM,kBACNP,OAAQA,EACRtB,YAAaA,EACbQ,WAAYA,EACZsB,WAAY,SAACC,EAAOC,GAChB/B,EAAe+B,EACnB,EACAC,OAAQ,SAACzD,GACL,OACI0D,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAApD,SAAA,EACIN,EAAAA,EAAAA,KAAC2D,EAAmB,CAAC5D,MAAOA,KAC5BC,EAAAA,EAAAA,KAAC4D,EAAAA,EAAW,CAAC7D,MAAOA,MAGhC,EACA8D,YAAa,WAAO,GAGhC,C,2BC1DIC,EAAyBC,EAAQ,MAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBH,EAAuBC,EAAQ,OAChDG,EAAcH,EAAQ,KACtBI,GAAW,EAAIF,EAAeG,UAAuB,EAAIF,EAAYG,KAAK,OAAQ,CACpFC,EAAG,kFACD,UACJN,EAAQ,EAAUG,C,2BCVdL,EAAyBC,EAAQ,MAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBH,EAAuBC,EAAQ,OAChDG,EAAcH,EAAQ,KACtBI,GAAW,EAAIF,EAAeG,UAAuB,EAAIF,EAAYG,KAAK,OAAQ,CACpFC,EAAG,6KACD,cACJN,EAAQ,EAAUG,C","sources":["components/cardIconAndAvatar/icons/writeReview.js","components/cardIconAndAvatar/icons/removeFromFavorites.js","pages/favoriteMoviesPage.js","../node_modules/@mui/icons-material/Delete.js","../node_modules/@mui/icons-material/RateReview.js"],"sourcesContent":["import React from \"react\";\nimport RateReviewIcon from \"@mui/icons-material/RateReview\";\nimport { Link } from \"react-router-dom\";\n\nconst WriteReviewIcon = ({ movie }) => {\n    return (\n        <Link\n            to={`/reviews/form`}\n            state={{\n                movieId: movie.id,\n            }}\n        >\n            <RateReviewIcon color=\"primary\" fontSize=\"large\" />\n        </Link>\n    );\n};\n\nexport default WriteReviewIcon;","import React, { useContext } from \"react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport { MoviesContext } from \"../../../contexts/moviesContext\";\n\nconst RemoveFromFavoritesIcon = ({ movie }) => {\n    const context = useContext(MoviesContext);\n\n    const handleRemoveFromFavorites = (e) => {\n        e.preventDefault();\n        context.removeFromFavorites(movie);\n    };\n    return (\n        <IconButton\n            aria-label=\"remove from favorites\"\n            onClick={handleRemoveFromFavorites}\n        >\n            <DeleteIcon color=\"primary\" fontSize=\"large\" />\n        </IconButton>\n    );\n};\n\nexport default RemoveFromFavoritesIcon;","import React, {useContext, useState} from \"react\";\nimport PageTemplate from \"../components/templateMovieListPage\";\nimport { MoviesContext } from \"../contexts/moviesContext\";\nimport { useQueries } from \"react-query\";\nimport { getMovie } from \"../api/tmdb-api\";\nimport Spinner from '../components/spinner'\nimport RemoveFromFavorites from \"../components/cardIconAndAvatar/icons/removeFromFavorites\";\nimport WriteReview from \"../components/cardIconAndAvatar/icons/writeReview\";\n\nconst FavoriteMoviesPage = () => {\n    const [currentPage, setCurrentPage] = useState(1);\n    const {favorites: movieIds } = useContext(MoviesContext);\n\n    const moviesPerPage = 20;\n\n    const indexOfLastMovie = currentPage * moviesPerPage;\n    const indexOfFirstMovie = indexOfLastMovie - moviesPerPage;\n    const currentMoviesIds = movieIds.slice(indexOfFirstMovie, indexOfLastMovie);\n    const totalPages = Math.ceil(movieIds.length / moviesPerPage);\n\n    // Create an array of queries and run in parallel.\n    const favoriteMovieQueries = useQueries(\n        currentMoviesIds.map((movieId) => {\n            return {\n                queryKey: [\"movie\", { id: movieId }],\n                queryFn: getMovie,\n            };\n        })\n    );\n    // Check if any of the parallel queries is still loading.\n    const isLoading = favoriteMovieQueries.find((m) => m.isLoading === true);\n\n    if (isLoading) {\n        return <Spinner />;\n    }\n    //提取了流派ID为Movie一个单独的数组属性\n    const movies = favoriteMovieQueries.map((q) => {\n        q.data.genre_ids = q.data.genres.map(g => g.id)\n        return q.data\n    });\n\n    return (\n        <PageTemplate\n            title=\"Favorite Movies\"\n            movies={movies}\n            currentPage={currentPage}\n            totalPages={totalPages}\n            pageChange={(event, value) => {\n                setCurrentPage(value);\n            }}\n            action={(movie) => {\n                return (\n                    <>\n                        <RemoveFromFavorites movie={movie} />\n                        <WriteReview movie={movie} />\n                    </>\n                );\n            }}\n            avatarCheck={() => {}} //no avatar for favorite movies\n        />\n    );\n};\n\nexport default FavoriteMoviesPage;","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\nexports.default = _default;","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 14v-2.47l6.88-6.88c.2-.2.51-.2.71 0l1.77 1.77c.2.2.2.51 0 .71L8.47 14H6zm12 0h-7.5l2-2H18v2z\"\n}), 'RateReview');\nexports.default = _default;"],"names":["_ref","movie","_jsx","Link","to","state","movieId","id","children","RateReviewIcon","color","fontSize","context","useContext","MoviesContext","IconButton","onClick","e","preventDefault","removeFromFavorites","DeleteIcon","_useState","useState","_useState2","_slicedToArray","currentPage","setCurrentPage","movieIds","favorites","indexOfLastMovie","indexOfFirstMovie","currentMoviesIds","slice","totalPages","Math","ceil","length","favoriteMovieQueries","useQueries","map","queryKey","queryFn","getMovie","find","m","isLoading","Spinner","movies","q","data","genre_ids","genres","g","PageTemplate","title","pageChange","event","value","action","_jsxs","_Fragment","RemoveFromFavorites","WriteReview","avatarCheck","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}